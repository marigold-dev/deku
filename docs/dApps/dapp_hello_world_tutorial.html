<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-dApps/dapp_hello_world_tutorial">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Create your first JS Deku dApp | Deku</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://deku-docs.marigold.dev/deku/docs/dApps/dapp_hello_world_tutorial"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Create your first JS Deku dApp | Deku"><meta data-rh="true" name="description" content="In this tutorial, we demonstrate how to create an DApp (using TypeScript) to interact with the Deku-Parametric or Deku-P in short."><meta data-rh="true" property="og:description" content="In this tutorial, we demonstrate how to create an DApp (using TypeScript) to interact with the Deku-Parametric or Deku-P in short."><link data-rh="true" rel="icon" href="https://uploads-ssl.webflow.com/616ab4741d375d1642c19027/617952f8510cfc45cbf09312_Favicon(3)(1).png"><link data-rh="true" rel="canonical" href="https://deku-docs.marigold.dev/deku/docs/dApps/dapp_hello_world_tutorial"><link data-rh="true" rel="alternate" href="https://deku-docs.marigold.dev/deku/docs/dApps/dapp_hello_world_tutorial" hreflang="en"><link data-rh="true" rel="alternate" href="https://deku-docs.marigold.dev/deku/docs/dApps/dapp_hello_world_tutorial" hreflang="x-default"><script src="https://buttons.github.io/buttons.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.8/clipboard.min.js" async></script>
<script src="https://www.tezbridge.com/plugin.js" async></script><link rel="stylesheet" href="/deku/assets/css/styles.b1a93a28.css">
<link rel="preload" href="/deku/assets/js/runtime~main.af1ef27e.js" as="script">
<link rel="preload" href="/deku/assets/js/main.f257556d.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/deku/"><div class="navbar__logo"><img src="/deku/img/deku-logo.svg" alt="Deku" class="themedImage_ToTc themedImage--light_HNdA"><img src="/deku/img/deku-logo.svg" alt="Deku" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/deku/docs/intro">Tutorial</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/deku/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/deku/docs/category/deku-canonical">Deku Canonical</a><button aria-label="Toggle the collapsible sidebar category &#x27;Deku Canonical&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/deku/docs/category/deku-parametric">Deku Parametric</a><button aria-label="Toggle the collapsible sidebar category &#x27;Deku Parametric&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/deku/docs/dApps/dapp_hello_world_tutorial">dApps</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/deku/docs/dApps/dapp_hello_world_tutorial">Create your first JS Deku dApp</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/deku/docs/dApps/dapp_http_tutorial">dapp_http_tutorial</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/deku/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">dApps</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Create your first JS Deku dApp</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Create your first JS Deku dApp</h1><p>In this tutorial, we demonstrate how to create an DApp (using TypeScript) to interact with the Deku-Parametric or Deku-P in short.</p><p>TLDR;
Deku-P is a private blockchain (it has its own consensus, gossip, network, validators, etc.). Where it has a separate WASM act as the bridge, to communicate between your DApp and the blockchain. The advantage of Deku-P is that you only need to focus on writing your dApp, Deku-P will take care of how to handle the transaction, consensus, etc. for you.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">​</a></h2><ol start="0"><li>You can clone the github directory and use the branch <a href="https://github.com/marigold-dev/deku/tree/parametric-develop" target="_blank" rel="noopener noreferrer">parametric-develop</a>, on your terminal type:</li></ol><div class="codeBlockWrapper_xZVe"><pre class="prism-code language-undefined codeBlock_wPnj" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/marigold-dev/deku.git </span></div><div class="token-line" style="color:#393A34"><span class="token plain">git checkout parametric-develop</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button></div><p>You can follow this <a href="https://github.com/marigold-dev/deku/tree/parametric" target="_blank" rel="noopener noreferrer">readme</a> on how to compile your project.</p><p>I will use <code>nix</code> to build this project as follow:</p><div class="codeBlockWrapper_xZVe"><pre class="prism-code language-undefined codeBlock_wPnj" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">cd deku</span></div><div class="token-line" style="color:#393A34"><span class="token plain">direnv allow</span></div><div class="token-line" style="color:#393A34"><span class="token plain">dune build</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button></div><ol><li>We will use Typescript as a main language for our application. Create the folder for your new project inside the folder <code>examples</code>.  On your terminal type:</li></ol><div class="codeBlockWrapper_xZVe"><pre class="prism-code language-undefined codeBlock_wPnj" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">cd examples</span></div><div class="token-line" style="color:#393A34"><span class="token plain">mkdir tutorial</span></div><div class="token-line" style="color:#393A34"><span class="token plain">npm init</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button></div><p><code>npm init</code> to initialize your project.</p><ol start="2"><li>Run <code>npm install typescript</code>, it will create a file <code>package.json</code>.
Inside this file you can add the configuration file <code>tsconfig.json</code> which contain all the configurations for your typescript project.</li></ol><div class="codeBlockWrapper_xZVe"><pre class="prism-code language-undefined codeBlock_wPnj" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">&quot;scripts&quot;: {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    &quot;build&quot;: &quot;tsc --p tsconfig.json&quot;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  },</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button></div><p>Create a new file <code>tsconfig.json</code> at the same level of your typescript project</p><div class="codeBlockWrapper_xZVe"><pre class="prism-code language-undefined codeBlock_wPnj" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">touch tsconfig.json</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button></div><p>copy the content of this <a href="https://github.com/marigold-dev/deku/blob/cookie-game/examples/tutorial/tsconfig.json" target="_blank" rel="noopener noreferrer"><code>tsconfig.json</code></a></p><ol start="3"><li>Now you need to build a WASM so that you have a communication channel between your application and the Deku-P. </li></ol><p>To do that in your <code>package.json</code> you can add the <code>&quot;dependecies&quot;</code> as follow:</p><div class="codeBlockWrapper_xZVe"><pre class="prism-code language-undefined codeBlock_wPnj" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">&quot;dependencies&quot;: {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    &quot;deku_js_interop&quot;: &quot;file:../../sdks/deku_js_interop&quot;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    &quot;typescript&quot;: &quot;^4.7.4&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  }</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button></div><p>Or you can install <code>deku_js_interop</code> manually by using:</p><div class="codeBlockWrapper_xZVe"><pre class="prism-code language-undefined codeBlock_wPnj" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">npm install &quot;file:../.../sdks/deku_js_interop&quot;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button></div><p>Here is the complete <a href="https://github.com/marigold-dev/deku/blob/cookie-game/examples/tutorial/package.json" target="_blank" rel="noopener noreferrer"><code>package.json</code></a></p><ol start="4"><li>Now you can start to write your application. To do that create an <code>index.ts</code> file. This file will contain all the logic of your application.</li></ol><div class="codeBlockWrapper_xZVe"><pre class="prism-code language-undefined codeBlock_wPnj" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">touch index.ts</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button></div><ol start="5"><li>To be able to interact between Deku-P and your applcation, you need to have a Deku wallet. You can use the CLI <code>deku-cli</code> (for more information you can use <code>deku-cli --help</code>) provided by the Deku-P as follow:</li></ol><div class="codeBlockWrapper_xZVe"><pre class="prism-code language-undefined codeBlock_wPnj" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">alias deku-cli=&#x27;nix run github:marigold-dev/deku/parametric#deku-cli --&#x27;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">deku-cli create-wallet</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button></div><p>This will generate a <code>tz1xxxx.tzsidewallet</code> file. Let&#x27;s rename it to <code>wallet.json</code> for the example.</p><ol start="6"><li>Finally, we can test the dApp with the Deku-P, in this example we are using the CLI provided by Deku-P <code>create-mock-transaction</code> to run the example without interact with the Deku-P cluster, to interact with Deku-P cluster use <code>create-custom-transaction</code>. </li></ol><div class="codeBlockWrapper_xZVe"><pre class="prism-code language-undefined codeBlock_wPnj" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">ts index.ts</span></div><div class="token-line" style="color:#393A34"><span class="token plain">npm i</span></div><div class="token-line" style="color:#393A34"><span class="token plain">npm run build</span></div><div class="token-line" style="color:#393A34"><span class="token plain">deku-cli create-mock-transaction ./wallet.json $action node examples/tutorial/index.js</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button></div><ul><li><code>ts index.ts</code>: build <code>ts</code> to <code>js</code></li><li><code>npm i</code> and <code>npm run build</code>: build your TypeScript project.</li><li><code>$action</code>: is the input from dApp that you want to send to the WASM.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="write-dapp">Write dApp<a class="hash-link" href="#write-dapp" title="Direct link to heading">​</a></h2><p>Let&#x27;s start to write the logic for our dApp. We want to print out the <code>Hello World</code>.</p><p>Inside <code>index.ts</code> we import the library <code>deku_js_interop</code> to guide our dApp on how to communicate with the WASM.</p><div class="codeBlockWrapper_xZVe"><pre class="prism-code language-typescript codeBlock_wPnj" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> main</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> get</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> set</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> transaction </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;deku_js_interop&quot;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button></div><ul><li><code>main</code>: is the main function where it will take two parameters: <ul><li>initial state of your VM </li><li>state transition when there is a new input</li></ul></li><li><code>get</code>: retrieves the value from the local state, it will take a single parameter <code>key</code>, and will return the stored value.</li><li><code>set</code>: it will set a value  in a Deku state for a given key. It takes two parameters:<ul><li>key: a key of the state</li><li>value: a value is a string encoded in json format</li></ul></li><li><code>transition</code>: is a json received from the chain, it contains</li></ul><div class="codeBlockWrapper_xZVe"><pre class="prism-code language-undefined codeBlock_wPnj" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">interface transaction {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  source: string;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  tx_hash: string;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  op_hash: string;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  operation: { [key: string]: any };</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button></div><p>The complete <code>index.ts</code> example:</p><div class="codeBlockWrapper_xZVe"><pre class="prism-code language-typescript codeBlock_wPnj" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// @ts-ignore</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> main</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> get</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> set</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> transaction </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;deku_js_interop&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">transition</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tx</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> transaction</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// get the current value of `state` field defined in `main` function</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> source_value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">parse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;my_state&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// set the new value to `Hello world!`</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    source_value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Hello World!&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// save the new state</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;my_state&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> source_value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> my_state</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> transition</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button></div><ul><li>The <code>transition</code> function</li></ul><div class="codeBlockWrapper_xZVe"><pre class="prism-code language-typescript codeBlock_wPnj" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">transition</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tx</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> transaction</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button></div><p>The <code>tx</code> which is a <code>transaction</code> will allow you to retrieve and save the state of your application.</p><ul><li>The <code>main</code> function declare the initial state:</li></ul><div class="codeBlockWrapper_xZVe"><pre class="prism-code language-typescript codeBlock_wPnj" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> my_state</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> transition</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button></div><ul><li><code>my_state: &quot;&quot;</code>: it is the initial state, it must be a <code>JSON</code> object with the <code>tz1xxx</code> address as key</li><li><code>transition</code>: it will update the state.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="run-our-dapp-hello-world">Run our dApp: Hello World<a class="hash-link" href="#run-our-dapp-hello-world" title="Direct link to heading">​</a></h4><p>Call your VM transaction:</p><div class="codeBlockWrapper_xZVe"><pre class="prism-code language-undefined codeBlock_wPnj" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">npm run build</span></div><div class="token-line" style="color:#393A34"><span class="token plain">deku-cli create-mock-transaction wallet.json &#x27;&quot;&quot;&#x27; node examples/tutorial/index.js</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button></div><ul><li><code>npm run build</code> to build your VM.</li><li><code>$action</code> we give an empty string because we just want to call the <code>transition</code> with the value <code>Hello World</code> that already stored in our value out.</li></ul><p>If you want to run on Deku-P cluster use:</p><div class="codeBlockWrapper_xZVe"><pre class="prism-code language-undefined codeBlock_wPnj" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">tilt up -- --mode=local --vm=&quot;node examples/tutorial/index.js&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">deku-cli create-custom-transaction data/0 wallet.json &#x27;&quot;&quot;&#x27;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="operation">Operation<a class="hash-link" href="#operation" title="Direct link to heading">​</a></h2><p>In this example, instead giving the <code>$action</code> as an empty string, we will input the string <code>Hello World</code> from the dApp to the Deku-P cluster. To do that, let&#x27;s modify the code in the function <code>transition</code> in <code>index.ts</code> as follow:</p><div class="codeBlockWrapper_xZVe"><pre class="prism-code language-typescript codeBlock_wPnj" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">transition</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tx</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> transaction</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Getting source&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> source_value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">parse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;my_state&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Current value: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> source_value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// tx.operation is the last argument of `deku-cli` command line</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    source_value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">operation</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;New value: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> source_value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;my_state&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> source_value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button></div><p>We will simply write it in the last argument of <code>deku-cli create-custom-transaction</code>:</p><div class="codeBlockWrapper_xZVe"><pre class="prism-code language-shell codeBlock_wPnj" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">$ deku-cli create-custom-transaction data/0 wallet.json </span><span class="token string" style="color:#e3116c">&#x27;&quot;Hello world!&quot;&#x27;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button></div><p>To change the state with another string <code>Something else</code> we can use:</p><div class="codeBlockWrapper_xZVe"><pre class="prism-code language-shell codeBlock_wPnj" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">$ deku-cli create-custom-transaction data/0 wallet.json </span><span class="token string" style="color:#e3116c">&#x27;&quot;Something else&quot;&#x27;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button></div><p>And check on tilt, the VM state updating:</p><div class="codeBlockWrapper_xZVe"><pre class="prism-code language-undefined codeBlock_wPnj" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Getting source</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Current value:</span></div><div class="token-line" style="color:#393A34"><span class="token plain">New value: Hello world!</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Getting source</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Current value: Hello world!</span></div><div class="token-line" style="color:#393A34"><span class="token plain">New value: Something else</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button></div><p>The complete source code of our tutorial can be find at: <a href="https://github.com/marigold-dev/deku/tree/cookie-game/examples/tutorial" target="_blank" rel="noopener noreferrer">tutorial</a></p><p>For more complex examples, you can have a look at <a href="https://github.com/marigold-dev/deku/tree/cookie-game/examples/ts-counter" target="_blank" rel="noopener noreferrer">counter</a> or at <a href="https://github.com/marigold-dev/deku/tree/cookie-game/examples/cookie-game" target="_blank" rel="noopener noreferrer">cookie-game</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/../docs/dApps/dapp_hello_world_tutorial.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/deku/docs/Deku-P/intro"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">intro</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/deku/docs/dApps/dapp_http_tutorial"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">dapp_http_tutorial</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#write-dapp" class="table-of-contents__link toc-highlight">Write dApp</a></li><li><a href="#operation" class="table-of-contents__link toc-highlight">Operation</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/deku/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/deku/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/deku/assets/js/runtime~main.af1ef27e.js"></script>
<script src="/deku/assets/js/main.f257556d.js"></script>
</body>
</html>