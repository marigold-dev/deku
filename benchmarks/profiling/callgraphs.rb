#
# `gprof2dot`: command-line tool for generating callgraphs (example for deku-node)
# https://github.com/jrfonseca/gprof2dot
#
# - Install on Debian/Ubuntu run first:
# sudo apt-get install python3 graphviz (install dot)
# sudo apt-get install python3-pip
# sudo pip install gprof2dot
#
# Read perf.data generated by Linux perf using gprof2dot
# Run this script only when `perf record` is properly terminated (a.k.a: ruby profile_node.rb)

callgraphs=
command="cd .. && cd .. && perf script | c++filt | gprof2dot -f perf | dot -Tpng -o ~/deku/benchmarks/profiling/callgraphs_deku_node.png"
system(command)